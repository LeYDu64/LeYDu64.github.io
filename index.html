<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L'Imposteur du Village</title>

<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #1e1e1e;
    color: white;
    padding: 20px;
}

button {
    padding: 15px;
    font-size: 18px;
    margin-top: 15px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
}

.hidden {
    display: none;
}

.card {
    background: #2c2c2c;
    padding: 30px;
    border-radius: 15px;
    margin-top: 30px;
}
</style>
</head>

<body>

<h1>üé≠ L'Imposteur du Village</h1>

<div id="setup">
    <p>Nombre de joueurs :</p>
    <input type="number" id="playerCount" min="4" value="4">
    <br>
    <button onclick="startGame()">Commencer</button>
</div>

<div id="transition" class="hidden">
    <div class="card">
        <h2>Passe le t√©l√©phone</h2>
        <p>Joueur <span id="playerNumber"></span>, clique pour voir ton r√¥le</p>
        <button onclick="showRole()">Voir mon r√¥le</button>
    </div>
</div>

<div id="reveal" class="hidden">
    <div class="card">
        <h2 id="roleText"></h2>
        <h3 id="wordText"></h3>
        <button onclick="nextPlayer()">Cacher et passer</button>
    </div>
</div>

<script>

let players = [];
let currentPlayer = 0;

let words = [
["Chat","Tigre"],
["Pizza","Burger"],
["Voiture","Moto"],
["Plage","Piscine"],
["Lion","Panth√®re"],
["Avion","H√©licopt√®re"],
["Pomme","Poire"],
["Ordinateur","Tablette"],
["Caf√©","Th√©"],
["Neige","Glace"],
["Chien","Loup"],
["Fromage","Yaourt"],
["Train","Tram"],
["For√™t","Jungle"],
["H√¥pital","Clinique"],
["Chaussure","Botte"],
["Montagne","Colline"],
["T√©l√©phone","Radio"],
["Film","S√©rie"],
["Bateau","Sous-marin"]
];

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function startGame() {
    let count = parseInt(document.getElementById("playerCount").value);
    players = [];

    let randomPair = words[Math.floor(Math.random() * words.length)];
    let villageWord = randomPair[0];
    let impostorWord = randomPair[1];

    let impostorCount = Math.max(1, Math.floor(count / 4));

    // Cr√©er tous villageois
    for (let i = 0; i < count; i++) {
        players.push({
            role: "Villageois",
            word: villageWord
        });
    }

    shuffle(players); // m√©lange AVANT attribution

    // Assigner imposteurs al√©atoirement
    for (let i = 0; i < impostorCount; i++) {
        players[i].role = "Imposteur";
        players[i].word = impostorWord;
    }

    shuffle(players); // rem√©lange pour √©viter 1er joueur imposteur

    currentPlayer = 0;

    document.getElementById("setup").classList.add("hidden");
    document.getElementById("transition").classList.remove("hidden");

    updateTransition();
}

function updateTransition(){
    document.getElementById("playerNumber").innerText = currentPlayer + 1;
}

function showRole() {
    let player = players[currentPlayer];

    document.getElementById("transition").classList.add("hidden");
    document.getElementById("reveal").classList.remove("hidden");

    document.getElementById("roleText").innerText =
        player.role;

    document.getElementById("wordText").innerText =
        player.word;
}

function nextPlayer() {
    currentPlayer++;

    if (currentPlayer >= players.length) {
        document.body.innerHTML =
        "<h2>üéâ Tous les r√¥les ont √©t√© distribu√©s !</h2><p>Vous pouvez commencer √† jouer.</p>";
        return;
    }

    document.getElementById("reveal").classList.add("hidden");
    document.getElementById("transition").classList.remove("hidden");

    updateTransition();
}

</script>

</body>
</html>
