<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#1a120b">
<title>ğŸ‘‘ Le RenÃ©gat du Royaume</title>

<style>
body{
margin:0;
font-family:'Georgia',serif;
color:#f5deb3;
text-align:center;
background:radial-gradient(circle at top,#3b2a1d,#1a120b 60%);
}
.container{max-width:520px;margin:auto;padding:20px;}
.logo{font-size:32px;font-weight:bold;color:gold;text-shadow:0 0 10px gold;}
.card{
background:linear-gradient(145deg,#2b1d13,#1a120b);
padding:20px;margin-top:20px;border-radius:18px;
box-shadow:0 0 25px rgba(255,215,0,0.2);
border:1px solid rgba(255,215,0,0.2);
}
input{
padding:10px;margin:6px;border-radius:8px;
border:1px solid #b8860b;background:#1a120b;color:#f5deb3;
}
button{
background:linear-gradient(145deg,#b8860b,#8b6508);
border:none;padding:12px;margin:8px 0;width:100%;
font-size:16px;border-radius:10px;color:white;
cursor:pointer;font-weight:bold;
}
button:hover{background:linear-gradient(145deg,#d4af37,#a67c00);}
.playerButton{background:linear-gradient(145deg,#5a3e2b,#3b2a1d);}
.ruleBtn{background:#3e6b48;}
.resetBtn{background:#6b2c2c;}
.hidden{display:none;}
</style>
</head>

<body>
<div class="container">

<div class="logo">ğŸ‘‘ Le RenÃ©gat du Royaume</div>

<div id="setup" class="card">
<h3>âš” Configuration</h3>

<input type="number" id="playerCount" min="3" placeholder="Nombre de joueurs (min 3)">
<input type="number" id="impostorCount" min="0" placeholder="Nombre de RenÃ©gats">
<input type="number" id="idiotCount" min="0" placeholder="Nombre d'Idiots du Royaume">

<div id="nameInputs"></div>

<button onclick="generateNameInputs()">Valider joueurs</button>
<button onclick="startGame()">Lancer la partie</button>
<button class="ruleBtn" onclick="toggleRules()">RÃ¨gles</button>
<button class="resetBtn" onclick="resetData()">RÃ©initialiser</button>
</div>

<div id="rules" class="card hidden">
<h3>ğŸ“œ RÃ´les</h3>
<p>
ğŸ‘¨â€ğŸŒ¾ <b>Villageois</b> : Ont le mÃªme mot.<br><br>
ğŸ•µï¸ <b>RenÃ©gats</b> : Ont un mot diffÃ©rent.<br><br>
ğŸ¤¡ <b>Idiot du Royaume</b> : N'a aucun mot et tente de deviner le mot des villageois Ã  son Ã©limination.<br><br>
âš–ï¸ Minimum 3 joueurs.<br>
RenÃ©gats et Idiots peuvent Ãªtre 0.<br>
Mais pas les deux Ã  0.
</p>
</div>

<div id="transition" class="card hidden">
<h3>Passe le tÃ©lÃ©phone Ã </h3>
<h2 id="playerName"></h2>
<button onclick="showWord()">Voir mon rÃ´le</button>
</div>

<div id="reveal" class="card hidden">
<h2 id="wordText"></h2>
<button onclick="nextPlayer()">Cacher</button>
</div>

<div id="voteScreen" class="card hidden">
<h3>Votez un joueur</h3>
<div id="voteButtons"></div>
</div>

<div id="resultScreen" class="card hidden"></div>

</div>

<script>
let players=[];
let currentPlayer=0;
let villageWord="";
let impostorWord="";

const words=[
["Chat","Tigre"],["Lion","PanthÃ¨re"],["Chien","Loup"],
["Pizza","Burger"],["PÃ¢tes","Riz"],["Frites","Chips"],
["Voiture","Moto"],["Avion","HÃ©licoptÃ¨re"],
["Mer","Piscine"],["Montagne","Colline"],
["Ordinateur","Tablette"],["TÃ©lÃ©phone","Radio"],
["Film","SÃ©rie"],["Livre","Magazine"],
["CafÃ©","ThÃ©"],["Chocolat","Bonbon"],
["Bateau","Sous-marin"],["Neige","Glace"],
["Pomme","Poire"],["Soleil","Lune"],
["Football","Basket"],["Paris","Londres"],
["Dragon","Dinosaure"],["Clown","Magicien"]
];

function saveConfig(){
const config={
playerCount:playerCount.value,
impostorCount:impostorCount.value,
idiotCount:idiotCount.value,
names:getNames()
};
localStorage.setItem("royaumeConfig",JSON.stringify(config));
}

function loadConfig(){
const saved=JSON.parse(localStorage.getItem("royaumeConfig"));
if(!saved) return;
playerCount.value=saved.playerCount;
impostorCount.value=saved.impostorCount;
idiotCount.value=saved.idiotCount||0;
generateNameInputs();
setTimeout(()=>{
saved.names.forEach((name,i)=>{
let input=document.getElementById("name"+i);
if(input) input.value=name;
});
},100);
}

function resetData(){
localStorage.removeItem("royaumeConfig");
location.reload();
}

function shuffle(array){
for(let i=array.length-1;i>0;i--){
let j=Math.floor(Math.random()*(i+1));
[array[i],array[j]]=[array[j],array[i]];
}
}

function getNames(){
let names=[];
for(let i=0;i<playerCount.value;i++){
names.push(document.getElementById("name"+i)?.value||("Joueur "+(i+1)));
}
return names;
}

function generateNameInputs(){
let count=parseInt(playerCount.value)||0;
let container=document.getElementById("nameInputs");
container.innerHTML="";
for(let i=0;i<count;i++){
let input=document.createElement("input");
input.id="name"+i;
input.placeholder="Nom joueur "+(i+1);
container.appendChild(input);
}
saveConfig();
}

function startGame(){

saveConfig();

let count=parseInt(playerCount.value)||0;
let impostors=parseInt(impostorCount.value)||0;
let idiotCountValue=parseInt(idiotCount.value)||0;

if(count<3){
alert("Minimum 3 joueurs.");
return;
}

if(impostors<0||idiotCountValue<0){
alert("Valeur invalide.");
return;
}

if(impostors+idiotCountValue>=count){
alert("Trop de rÃ´les spÃ©ciaux.");
return;
}

if(impostors===0 && idiotCountValue===0){
alert("Il faut au moins un RenÃ©gat ou un Idiot du Royaume.");
return;
}

players=[];

let pair=words[Math.floor(Math.random()*words.length)];
villageWord=pair[0];
impostorWord=pair[1];

let names=getNames();

for(let i=0;i<count;i++){
players.push({
name:names[i],
role:"Villageois",
word:villageWord,
alive:true
});
}

shuffle(players);

for(let i=0;i<impostors;i++){
players[i].role="RenÃ©gat";
players[i].word=impostorWord;
}

let index=impostors;
for(let i=0;i<idiotCountValue;i++){
players[index].role="Idiot du Royaume";
players[index].word="";
index++;
}

shuffle(players);

currentPlayer=0;
setup.classList.add("hidden");
transition.classList.remove("hidden");
playerName.innerText=players[currentPlayer].name;
}

function showWord(){
transition.classList.add("hidden");
reveal.classList.remove("hidden");
let player=players[currentPlayer];
if(player.role==="Idiot du Royaume"){
wordText.innerText="ğŸ¤¡ Tu es l'Idiot du Royaume";
}else{
wordText.innerText=player.word;
}
}

function nextPlayer(){
currentPlayer++;
if(currentPlayer>=players.length){
reveal.classList.add("hidden");
startVote();
return;
}
reveal.classList.add("hidden");
transition.classList.remove("hidden");
playerName.innerText=players[currentPlayer].name;
}

function startVote(){
voteScreen.classList.remove("hidden");
voteButtons.innerHTML="";
players.forEach(p=>{
if(p.alive){
let btn=document.createElement("button");
btn.className="playerButton";
btn.innerText=p.name;
btn.onclick=()=>eliminate(p);
voteButtons.appendChild(btn);
}
});
}

function eliminate(player){
player.alive=false;
voteScreen.classList.add("hidden");
resultScreen.classList.remove("hidden");
resultScreen.innerHTML="<h3>"+player.name+" Ã©tait "+player.role+"</h3>";

if(player.role==="Idiot du Royaume"){
let guess=prompt("Quel est le mot des villageois ?");
if(guess && guess.toLowerCase()===villageWord.toLowerCase()){
resultScreen.innerHTML+="<h2>ğŸ¤¡ L'Idiot triomphe !</h2>";
resultScreen.innerHTML+="<button onclick='location.reload()'>Nouvelle partie</button>";
return;
}
}

let impostorsAlive=players.filter(p=>p.role==="RenÃ©gat"&&p.alive).length;
let villagersAlive=players.filter(p=>p.role==="Villageois"&&p.alive).length;

if(impostorsAlive===0){
resultScreen.innerHTML+="<h2>ğŸ‰ Victoire des Villageois</h2>";
resultScreen.innerHTML+="<button onclick='location.reload()'>Nouvelle partie</button>";
return;
}

if(impostorsAlive>=villagersAlive){
resultScreen.innerHTML+="<h2>ğŸ’€ Victoire des RenÃ©gats</h2>";
resultScreen.innerHTML+="<button onclick='location.reload()'>Nouvelle partie</button>";
return;
}

resultScreen.innerHTML+="<button onclick='nextRound()'>Continuer</button>";
}

function nextRound(){
resultScreen.classList.add("hidden");
startVote();
}

function toggleRules(){
rules.classList.toggle("hidden");
}

loadConfig();
</script>
</body>
</html>
